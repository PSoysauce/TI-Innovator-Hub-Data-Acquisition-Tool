jQuery.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",(function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}))},$("#settings-form input").inputFilter((function(e){return/^-{0,1}\d*\.{0,1}\d*$/.test(e)}));var ctx=document.getElementById("oscilloscopeChart").getContext("2d"),chart=new Chart(ctx,{type:"line",data:{datasets:[{label:"Voltage",pointStyle:"line",data:[],steppedLine:!1,fill:!1,borderColor:"rgb(14, 173, 105)"}]},options:{plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}},title:{display:!0,text:"Oscilloscope",fontColor:"rgb(255, 255, 255)"},legend:{labels:{defaultFontFamily:"'Roboto', 'Franklin Gothic Medium', 'Tahoma', 'sans-serif",fontColor:"rgb(255, 255, 255)"}},color:"rgb(255, 255, 255)",scales:{yAxes:[{gridLines:{drawOnChartArea:!1},ticks:{fontColor:"rgb(255, 255, 255)",beginAtZero:!0,callback:function(e,t,i){return e+" V"}},scaleLabel:{display:!0,labelString:"Voltage"},type:"linear"}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,fontColor:"rgb(255, 255, 255)",beginAtZero:!0,callback:function(e,t,i){return e}},type:"realtime",scaleLabel:{display:!0,labelString:"Time"},realtime:{onRefresh:function(e){e.data.datasets.forEach((function(e){e.data.push({x:Date.now(),y:plotSine()})}))},delay:2e3}}]}}}),x=1,frequency=1,amplitude=1,period=1/frequency;function updateVars(){frequency=(frequency=parseFloat($("#freq-input").val()))<=0?.01:frequency,amplitude=parseFloat($("#amplitude-input").val())}function onReceive(e){window.oscilloscopeChart.config.data.datasets[e.index].data.push({x:e.timestamp,y:e.value}),window.oscilloscopeChart.update({preservation:!0})}function plotSine(){return switchX(),amplitude*Math.sin(x/frequency)}function switchX(){x=x==amplitude?-1*amplitude:amplitude}$("#settings-form :input").change((function(){this.id.includes("range")?$("#"+this.id.substring(0,this.id.indexOf("range"))+"input").val(this.value):this.id.includes("input")&&$("#"+this.id.substring(0,this.id.indexOf("input"))+"range").val(this.value),updateVars()}));